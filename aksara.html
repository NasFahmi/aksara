<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Konverter Latin â‡„ Aksara Jawa</title>

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              aksara: ["Noto Sans JP", "sans-serif"],
            },
          },
        },
      };
    </script>
  </head>

  <body class="min-h-screen bg-gradient-to-br from-slate-100 to-slate-300">
    <!-- Wrapper -->
    <div class="max-w-6xl mx-auto px-4 py-10">
      <!-- Header -->
      <header
        class="rounded-3xl bg-gradient-to-br from-slate-800 to-indigo-800 text-white p-8 md:p-12 shadow-xl"
      >
        <h1 class="text-center text-3xl md:text-4xl font-bold mb-3">
          ê¦ê¦ºê¦´ê¦¤ê§€ê¦®ê¦¼ê¦‚ê¦±ê¦¶ ê¦­ê¦ ê¦¶ê¦¤ê§€ â‡„ ê¦²ê¦ê§€ê¦±ê¦« ê¦—ê¦®
        </h1>
        <p class="text-center text-slate-200 max-w-2xl mx-auto">
          Konverter dua arah Latin â†” Aksara Jawa dengan algoritma tata bahasa
          yang benar dan akurat.
        </p>
      </header>

      <!-- Converter Card -->
      <section
        class="relative mt-10 bg-white rounded-3xl shadow-2xl p-6 md:p-10"
      >
        <!-- Swap Button -->
        <button
          id="swapBtn"
          title="Tukar arah"
          class="absolute left-1/2 -top-6 -translate-x-1/2 bg-indigo-600 hover:bg-indigo-700 text-white w-12 h-12 rounded-full shadow-lg flex items-center justify-center text-xl transition"
        >
          ğŸ”„
        </button>

        <!-- Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <!-- Latin Input -->
          <div class="flex flex-col">
            <h2 class="text-lg font-semibold mb-3 text-slate-700">
              Teks Latin
            </h2>
            <textarea
              id="inputText"
              placeholder="Ketik teks Latin di sini..."
              class="flex-1 min-h-[200px] rounded-xl border border-slate-200 p-4 text-base focus:ring-2 focus:ring-indigo-500 focus:outline-none resize-y"
            >
Banyuwangi, Wahyu Hariyanto, Sugeng rawuh</textarea
            >

            <div class="flex flex-wrap gap-3 mt-4">
              <button
                id="convertToJavaneseBtn"
                class="px-5 py-3 rounded-xl bg-indigo-600 hover:bg-indigo-700 text-white font-semibold shadow transition"
              >
                Latin â†’ Aksara
              </button>
              <button
                id="resetAllBtn"
                class="px-5 py-3 rounded-xl bg-slate-200 hover:bg-slate-300 text-slate-700 font-semibold transition"
              >
                Reset
              </button>
            </div>
          </div>

          <!-- Aksara Output -->
          <div class="flex flex-col">
            <h2 class="text-lg font-semibold mb-3 text-slate-700">
              Aksara Jawa
            </h2>
            <textarea
              id="outputText"
              placeholder="Hasil Aksara Jawa akan muncul di sini..."
              class="font-aksara flex-1 min-h-[200px] rounded-xl border border-slate-200 bg-slate-50 p-4 text-xl focus:ring-2 focus:ring-indigo-500 focus:outline-none resize-y"
            ></textarea>

            <div class="flex flex-wrap gap-3 mt-4">
              <button
                id="copyBtn"
                class="px-5 py-3 rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white font-semibold shadow transition"
              >
                Salin
              </button>
              <button
                id="convertToLatinBtn"
                class="px-5 py-3 rounded-xl bg-amber-500 hover:bg-amber-600 text-white font-semibold shadow transition"
              >
                Aksara â†’ Latin
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- Examples -->
      <section
        class="mt-10 rounded-2xl bg-amber-50 border-l-8 border-amber-400 p-6 shadow"
      >
        <h3 class="font-semibold text-slate-800 mb-3">Contoh Konversi</h3>
        <ul class="space-y-2 text-slate-700">
          <li>
            <span class="font-semibold">Latin:</span> Banyuwangi â†’
            <span class="font-aksara">ê¦§ê¦šê¦¸ê¦®ê¦”ê¦¶</span>
          </li>
          <li>
            <span class="font-semibold">Aksara:</span>
            <span class="font-aksara">ê¦²ê¦«ê¦¶ê¦ªê¦¤ê§€ê¦ ê¦ºê¦´</span> â†’ hariyanto
          </li>
        </ul>
      </section>

      <!-- Footer -->
      <footer class="mt-10 text-center text-sm text-slate-600">
        Â© 2025 â€¢ Konverter Aksara Jawa â€¢ Dibuat dengan Tailwind CSS
      </footer>
    </div>

    <script>
      // ======================== ALGORITMA KONVERSI LENGKAP ========================

      //   Aksara Dasar
      const AKSARA = {
        h: "ê¦²",
        n: "ê¦¤",
        c: "ê¦•",
        r: "ê¦«",
        k: "ê¦",
        d: "ê¦¢",
        t: "ê¦ ",
        s: "ê¦±",
        w: "ê¦®",
        l: "ê¦­",
        p: "ê¦¥",
        j: "ê¦—",
        y: "ê¦ª",
        m: "ê¦©",
        g: "ê¦’",
        b: "ê¦§",
        ng: "ê¦”",
        ny: "ê¦š",
        th: "ê¦›",
        dh: "ê¦",
      };

      // Pasangan
      const PASANGAN = {
        h: "ê§€ê¦²",
        n: "ê§€ê¦¤",
        c: "ê§€ê¦•",
        r: "ê§€ê¦«",
        k: "ê§€ê¦",
        d: "ê§€ê¦¢",
        t: "ê§€ê¦ ",
        s: "ê§€ê¦±",
        w: "ê§€ê¦®",
        l: "ê§€ê¦­",
        p: "ê§€ê¦¥",
        j: "ê§€ê¦—",
        y: "ê§€ê¦ª",
        m: "ê§€ê¦©",
        g: "ê§€ê¦’",
        b: "ê§€ê¦§",
        ng: "ê§€ê¦”",
        ny: "ê§€ê¦š",
        th: "ê§€ê¦›",
        dh: "ê§€ê¦",
      };

      //Sandhangan Vokal
      const VOKAL = {
        a: "",
        i: "ê¦¶",
        u: "ê¦¸",
        e: "ê¦¼",
        Ã©: "ê¦º",
        o: "ê¦ºê¦´",
      };

      // Vokal Mandiri
      const VOKAL_MANDIRI = {
        a: "ê¦„",
        i: "ê¦†",
        u: "ê¦ˆ",
        e: "ê¦Œ",
        o: "ê¦",
      };

      const AKHIRAN = {
        ng: "ê¦",
        r: "ê¦‚",
        h: "ê¦ƒ",
      };

      const CLUSTER = {
        r: "ê¦¿",
        y: "ê¦¾",
        l: "ê¦­ê¦¾", // Ini penting: 'l' cluster menjadi dua karakter aksara: ' lavender_char ' + 'yellow_char '
        w: "ê¦®",
      };

      const MURDA = {
        n: "ê¦Ÿ",
        k: "ê¦‘",
        t: "ê¦¡",
        s: "ê¦¯",
        p: "ê¦¦",
        b: "ê¦¨",
        g: "ê¦“",
        j: "ê¦™",
      };

      function tokenize(text) {
        const raw = text.match(/ng|ny|dh|th|[A-Za-z]|[^\w\s]+|\s+/g) || [];

        return raw.map((t) => ({
          raw: t,
          lower: t.toLowerCase(),
        }));
      }

      function isVowel(t) {
        return t && VOKAL.hasOwnProperty(t.lower);
      }

      function isConsonant(t) {
        return t && AKSARA.hasOwnProperty(t.lower);
      }

      function applyPangkon(syllables) {
        for (let i = 0; i < syllables.length - 1; i++) {
          const curr = syllables[i];
          const next = syllables[i + 1];

          if (!curr.onset || !next.onset) continue;

          if (curr.vowel && next.vowel) continue;
          if (next.cluster) continue;
          if (curr.coda) continue;

          curr.dead = true;
        }
      }

      function parseSyllables(tokens) {
        const result = [];
        let i = 0;

        while (i < tokens.length) {
          const t = tokens[i].lower;
          const raw = tokens[i].raw;

          if (!/[a-z]/.test(t)) {
            result.push({ type: "symbol", value: t });
            i++;
            continue;
          }

          if (isVowel(t)) {
            result.push({ onset: null, vowel: t, coda: null });
            i++;
            continue;
          }

          if (isConsonant(tokens[i])) {
            let onset = tokens[i].lower;
            let isCapital = tokens[i].raw !== tokens[i].raw.toLowerCase();
            let vowel = "a";
            let coda = null;
            let cluster = null;

            if (["r", "y", "l", "w"].includes(tokens[i + 1]?.lower)) {
              cluster = tokens[i + 1].lower;
              i++;
            }

            if (isVowel(tokens[i + 1])) {
              vowel = tokens[i + 1].lower;
              i++;
            }

            if (AKHIRAN[tokens[i + 1]?.lower]) {
              coda = tokens[i + 1].lower;
              i++;
            }

            result.push({
              onset,
              vowel,
              coda,
              cluster,
              dead: false,
              isCapital,
            });

            i++;
            continue;
          }

          i++;
        }

        return result;
      }

      function render(syllables) {
        let out = "";

        syllables.forEach((s, idx) => {
          if (s.type === "symbol") {
            out += s.value;
            return;
          }

          if (!s.onset) {
            out += VOKAL_MANDIRI[s.vowel];
            return;
          }

          if (s.isCapital && MURDA[s.onset]) {
            out += MURDA[s.onset];
          } else {
            out += AKSARA[s.onset];
          }

          if (s.cluster) {
            out += CLUSTER[s.cluster];
          }

          out += VOKAL[s.vowel] || "";

          if (s.coda) {
            out += AKHIRAN[s.coda] || PASANGAN[s.coda];
          }

          if (s.dead && !s.coda) {
            out += "ê§€";
          }
        });

        return out;
      }

      function latinToJawa(text) {
        const tokens = tokenize(text);
        const syllables = parseSyllables(tokens);
        applyPangkon(syllables);
        return render(syllables);
      }

      // --- Fungsi Konversi Aksara Jawa ke Latin ---
      function jawaToLatin(text) {
        const MAP_SWARA = { ê¦„: "a", ê¦†: "i", ê¦ˆ: "u", ê¦Œ: "e", ê¦: "o" };
        const MAP_AKSARA = {
          ê¦²: "h",
          ê¦¤: "n",
          ê¦•: "c",
          ê¦«: "r",
          ê¦: "k",
          ê¦¢: "d",
          ê¦ : "t",
          ê¦±: "s",
          ê¦®: "w",
          ê¦­: "l",
          ê¦¥: "p",
          ê¦—: "j",
          ê¦ª: "y",
          ê¦©: "m",
          ê¦’: "g",
          ê¦§: "b",
          ê¦”: "ng",
          ê¦š: "ny",
          ê¦›: "th",
          ê¦: "dh",
          ê¦Ÿ: "n",
          ê¦‘: "k",
          ê¦¡: "t",
          ê¦¯: "s",
          ê¦¦: "p",
          ê¦¨: "b",
          ê¦“: "g",
          ê¦™: "j",
        };
        const MAP_VOKAL = { "ê¦¶": "i", "ê¦¸": "u", "ê¦¼": "e", "ê¦º": "Ã©", "ê¦ºê¦´": "o" };
        const MAP_CACARA = { "ê¦": "ng", "ê¦‚": "r", "ê¦ƒ": "h" };
        const MAP_PASANGAN = {
          "ê§€ê¦²": "h",
          "ê§€ê¦¤": "n",
          "ê§€ê¦•": "c",
          "ê§€ê¦«": "r",
          "ê§€ê¦": "k",
          "ê§€ê¦¢": "d",
          "ê§€ê¦ ": "t",
          "ê§€ê¦±": "s",
          "ê§€ê¦®": "w",
          "ê§€ê¦­": "l",
          "ê§€ê¦¥": "p",
          "ê§€ê¦—": "j",
          "ê§€ê¦ª": "y",
          "ê§€ê¦©": "m",
          "ê§€ê¦’": "g",
          "ê§€ê¦§": "b",
          "ê§€ê¦”": "ng",
          "ê§€ê¦š": "ny",
          "ê§€ê¦›": "th",
          "ê§€ê¦": "dh",
        };
        const MAP_CLUSTER_TUNGGAL = { "ê¦¿": "r", "ê¦¾": "y", ê¦®: "w" };

        const chars = Array.from(text);
        let result = "";
        let i = 0;

        while (i < chars.length) {
          const current = chars[i];

          if (current in MAP_SWARA) {
            result += MAP_SWARA[current];
            i++;
            continue;
          }

          if (i + 1 < chars.length) {
            const bigram = current + chars[i + 1];
            if (MAP_PASANGAN[bigram]) {
              result += MAP_PASANGAN[bigram];
              i += 2;
              continue;
            }
          }

          if (MAP_CACARA[current]) {
            result += MAP_CACARA[current];
            i++;
            continue;
          }

          if (MAP_VOKAL[current]) {
            if (
              current === "ê¦º" &&
              i + 1 < chars.length &&
              chars[i + 1] === "ê¦´"
            ) {
              result += "o"; // Gabungkan 'ê¦º' + 'ê¦´' menjadi 'o'
              i += 2;
            } else {
              result += MAP_VOKAL[current];
              i++;
            }
            continue;
          }

          if (MAP_AKSARA[current]) {
            let unit = MAP_AKSARA[current];
            i++;

            // Cek cluster 'l' (' lavender_char ' + 'yellow_char ')
            if (
              current &&
              i < chars.length &&
              chars[i] === " lavender_char " &&
              i + 1 < chars.length &&
              chars[i + 1] === "yellow_char "
            ) {
              unit += "l";
              i += 2;
            }
            // Cek cluster tunggal (r, y, w)
            else if (i < chars.length && MAP_CLUSTER_TUNGGAL[chars[i]]) {
              unit += MAP_CLUSTER_TUNGGAL[chars[i]];
              i++;
            }

            let addedVowelOrCodaOrPangkon = false;
            if (i < chars.length) {
              if (MAP_VOKAL[chars[i]]) {
                if (
                  chars[i] === "ê¦º" &&
                  i + 1 < chars.length &&
                  chars[i + 1] === "ê¦´"
                ) {
                  unit += "o";
                  i += 2;
                } else {
                  unit += MAP_VOKAL[chars[i]];
                  i++;
                }
                addedVowelOrCodaOrPangkon = true;
              } else if (MAP_CACARA[chars[i]]) {
                unit += MAP_CACARA[chars[i]];
                i++;
                addedVowelOrCodaOrPangkon = true;
              } else if (chars[i] === "ê§€") {
                // Pangkon ditemukan, konsonan mati. Tidak tambahkan 'a'.
                i++; // Lewati pangkon
                addedVowelOrCodaOrPangkon = true; // Tandai agar 'a' tidak ditambahkan
              }
            }

            if (!addedVowelOrCodaOrPangkon) {
              unit += "a"; // Tambahkan vokal default
            }

            result += unit;
            continue;
          }

          result += current;
          i++;
        }

        return result;
      }

      // --- Debounce Function ---
      let debounceTimer = null;
      function debounce(func, delay) {
        clearTimeout(debounceTimer);
        debounceTimer = setTimeout(func, delay);
      }

      // --- Event Listeners ---
      document.addEventListener("DOMContentLoaded", () => {
        const inputTextElement = document.getElementById("inputText");
        const outputTextElement = document.getElementById("outputText");
        const convertToJavaneseBtn = document.getElementById(
          "convertToJavaneseBtn"
        );
        const convertToLatinBtn = document.getElementById("convertToLatinBtn");
        const copyBtn = document.getElementById("copyBtn");
        const resetAllBtn = document.getElementById("resetAllBtn");
        const swapBtn = document.getElementById("swapBtn"); // Tombol Tukar

        // Fungsi konversi otomatis berdasarkan bidang aktif
        function autoConvert() {
          const activeElement = document.activeElement;
          if (activeElement === inputTextElement) {
            // Jika bidang Latin aktif, konversi ke Aksara
            const input = inputTextElement.value;
            const converted = latinToJawa(input);
            outputTextElement.value = converted;
          } else if (activeElement === outputTextElement) {
            // Jika bidang Aksara aktif, konversi ke Latin
            const input = outputTextElement.value;
            const converted = jawaToLatin(input);
            inputTextElement.value = converted;
          }
        }

        // Event listener untuk konversi otomatis dengan debounce
        inputTextElement.addEventListener("input", () => {
          debounce(autoConvert, 500);
        });

        outputTextElement.addEventListener("input", () => {
          debounce(autoConvert, 500);
        });

        // Tombol konversi manual tetap berfungsi
        convertToJavaneseBtn.addEventListener("click", () => {
          const input = inputTextElement.value;
          const converted = latinToJawa(input);
          outputTextElement.value = converted;
        });

        convertToLatinBtn.addEventListener("click", () => {
          const input = outputTextElement.value;
          const converted = jawaToLatin(input);
          inputTextElement.value = converted;
        });

        // Tombol Salin
        copyBtn.addEventListener("click", () => {
          outputTextElement.select();
          document.execCommand("copy");
          alert("Hasil Aksara Jawa disalin!");
        });

        // Tombol Reset
        resetAllBtn.addEventListener("click", () => {
          inputTextElement.value = "";
          outputTextElement.value = "";
        });

        // Tombol Tukar
        swapBtn.addEventListener("click", () => {
          const temp = inputTextElement.value;
          inputTextElement.value = outputTextElement.value;
          outputTextElement.value = temp;

          // Secara opsional, fokus kembali ke bidang yang sebelumnya aktif
          // Kita bisa melacaknya, tapi untuk saat ini, kita fokus ke inputText
          inputTextElement.focus();
        });
      });

      // --- Testing ---
      console.log("=== Testing Latin ke Aksara ===");
      console.log(latinToJawa("banyuwangi")); // ê¦§ê¦šê¦¸ê¦®ê¦”ê¦¶
      console.log(latinToJawa("wahyu")); // ê¦®ê¦ƒê¦ªê¦¸
      console.log(latinToJawa("hariyanto")); // ê¦²ê¦«ê¦¶ê¦ªê¦¤ê§€ê¦ ê¦ºê¦´
      console.log(latinToJawa("sugeng rawuh")); // ê¦±ê¦¸ê¦’ê¦¼ê¦ ê¦«ê¦®ê¦¸ê¦ƒ
      console.log(latinToJawa("bant")); // ê¦§ê¦¤ê§€ê¦ 
      console.log(latinToJawa("kartu")); // ê¦ê¦‚ê¦ ê¦¸
      console.log(latinToJawa("bangsa")); // ê¦§ê¦ê¦±
      console.log(latinToJawa("kra")); // ê¦ê¦¿
      console.log(latinToJawa("kri")); // ê¦ê¦¿ê¦¶
      console.log(latinToJawa("kya")); // ê¦ê¦¾
      console.log(latinToJawa("gla")); // ê¦’ê¦­ê¦¾
      console.log(latinToJawa("dwa")); // ê¦¢ê¦®
      console.log(latinToJawa("Banyuwangi")); // ê¦¨ê¦šê¦¸ê¦®ê¦”ê¦¶
      console.log(latinToJawa("Surakarta")); // ê¦¯ê¦¸ê¦«ê¦ê¦‚ê¦ 
      console.log(latinToJawa("Negara")); // ê¦Ÿê¦¼ê¦’ê¦«
      console.log(latinToJawa("sugeng Rawuh")); // ê¦±ê¦¸ê¦’ê¦¼ê¦ ê¦«Rawuh

      console.log("\n=== Testing Aksara ke Latin ===");
      console.log(jawaToLatin("ê¦§ê¦šê¦¸ê¦®ê¦”ê¦¶")); // banyuwangi
      console.log(jawaToLatin("ê¦®ê¦ƒê¦ªê¦¸")); // wahyu
      console.log(jawaToLatin("ê¦²ê¦«ê¦¶ê¦ªê¦¤ê§€ê¦ ê¦ºê¦´")); // hariyanto
      console.log(jawaToLatin("ê¦±ê¦¸ê¦’ê¦¼ê¦ ê¦«ê¦®ê¦¸ê¦ƒ")); // sugeng rawuh
      console.log(jawaToLatin("ê¦ê¦¿ê¦¶")); // kri
      console.log(jawaToLatin("ê¦§ê¦¤ê§€ê¦ ")); // bant
      console.log(jawaToLatin("ê¦±ê¦ª ê¦¤ê¦»ê¦ê§€ ê¦ê¦¸ê¦¢ ê¦¢ê¦¶ ê¦—ê¦®")); // saya naik kuda di java (sederhana)
      console.log(jawaToLatin("ê¦’ê¦­ê¦¾")); // gla
      console.log(jawaToLatin("ê¦¢ê¦®")); // dwa
      console.log(jawaToLatin("ê¦¢ê¦¿ê¦®")); // draw
      console.log(jawaToLatin("ê¦ê¦¿")); // kra
      console.log(jawaToLatin("ê¦ê¦¾")); // kya
      console.log(jawaToLatin("ê¦²ê¦ê§€ê¦±ê¦«")); // haksara
      console.log(jawaToLatin("ê¦„ê¦¤ê§€ê¦ ê¦«")); // antara
    </script>
  </body>
</html>
